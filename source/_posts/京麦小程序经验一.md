---
title: 京麦小程序经验一
date: 2020-10-13 17:25:11
tags:
  - 小程序
categories: 小程序
keywords: 小程序
description: 虚拟DOM的核心之一就是它的Diff算法，其中最为核心的就是核心Diff算法，只有在新旧虚拟DOM的子节点都是多个的时候，核心Diff算法才会派上用场。
cover: https://img11.360buyimg.com/imagetools/jfs/t1/144925/27/970/59191/5eec6d42Eee359811/8b7bbdb996007587.png
top_img: https://img10.360buyimg.com/imagetools/jfs/t1/133083/40/11052/11173/5f70524dE5f2bac4f/6ac0bf70c2099db1.jpg
---
### 京麦小程序开发经验谈-一


简介：

京麦小程序基于京东小程序，京东小程序又基于微信小程序。他们的关系（此处指功能）；微信小程序>京东小程序>京麦小程序。
京麦小程序支持的，京东小程序肯定支持，但是反过来，京东小程序支持的，京麦就不一定支持了，这也是我做京麦时参考京东小程序文档踩过的坑，都是心酸泪，因为京麦没有使用文档都是参考京东小程序文档。
下面我就我做的-拍卖管理（京麦小程序）遇到的问题，和大家分享一下，如有错误之处，望指正。


### 新开Webview与H5

- 1.使用时地址参数一定要转义，否则丢失参数；
- 2.小程序新开webview页面播放视频会有问题，部分手机不兼容，使用jd.openJMWebView方法，打开H5页面；

### 网络请求POST

- 1.网络请求post需要content-type设置成application/json；
- 2.需要后端做处理才能按照正常的post请求返回结果，否则会返回空；

### Rich-text富文本转义

- 1.富文本目前没有文档支持，参考微信小程序试用，div\span\img标签试用没有问题，但是也有很多不支持。具体需要一个个尝试；

### 登录态问题

- 1.登录态总是会掉，需要匹配出具体接口返回值，给出提示，目前没有登录页面供再次登录，只能重新进入；
- 2.小程序新开webview页面播放视频会有问题，部分手机不兼容，使用jd.openJMWebView方法，打开H5页面；

### navigitative
- 1.如果自定义的头部，在页面中再次定义头部时，不生效


### 数据缓存

- 1.使用jd.storage时，如果没有设置key而直接读取key时会报错，需要做容错处理，或者在页面开始就附一个初始值；

### IOS省略行样式问题

- 1.做一行超出隐藏时，需要设置text的display属性为block，不可以为inline-block,否则IOS不生效，安卓可以；

### 关于埋点

- 1.埋点需要引入京东已经封装好的js,然后调用js暴露的方法即可，可以分为手动埋点和自动埋点。具体参考文档；
- 2.[京麦小程序埋点](https://mp.jd.com/docs/dev/API/interface/openMiniProgram0.html)

### 注意

开始使用版本为京麦5.6.0，当前问题也是在此版本基础上，如果后续京麦有升级，可能会避免部分问题，此分享仅供5.6.0版本参考，后续版本可自己尝试
